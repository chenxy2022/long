# 给龙Q：图片爬虫代码
> 采用异步方式 aiohttp,aiofiles   
> 爬取的网址:http://www.defuv.com/
## 爬取步骤：  
1. 通过网页查看ajax，获取网址和参数信息 
2. 获取网页的json信息,(难点：json无法解析，采用参数content_type='text/html')
3. 根据json信息，通过pandas转化为df，生成文件名和网址。
4. df信息进行下载图片
5. 关注：下载网页json，下载图片内容，保存图片实际上串行的。为了避免大量爬取，万一断电导致下载失败，特意设置按组下载（默认400页为一组），每下完一组，保存后再继续下载下一组。  
6. 修改了一稿，将组任务变为协程，即几个组同时异步，效率是提高了，但是并发数太高了，会被服务器强制踢掉。还是原来的版本稳定。
## 文件说明  
1. defuv_open.py  
   > 公开区爬取文件
2. defuv_material.py  
    > 素材区爬取文件。  
    注意：这个文件需要引用公开区的模块。仅仅修改了参数，其他代码和公开区完全一样。  
## 更新说明
1. 异步版本增加了tcp连接的限制，防止爬取过快被服务器踢掉。文件名：defuv_open全异步TCP控制.py，删除了会被服务器踢掉的版本。


